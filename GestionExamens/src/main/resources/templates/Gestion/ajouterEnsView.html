<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ENSAH</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/ae360af17e.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="./bootstrap.min.css">
</head>
<body>
    <div th:replace="./menu.html"></div>

    <!-- Main -->
    <div class="main">
        <main class="content px-3 py-2">
            <div th:replace="Gestion/navGestion.html"></div>
            <h3 class="h2 mb-2 text-center">Ajouter un Enseignant</h3>
            <hr class="sidebar-divider my-0 p-2" style="color: #060707;">
        
            <div class="container " >
            <div th:if="${messageErreur}" class="alert alert-danger p-2" role="alert">
				    <!-- Afficher le message d'erreur -->
				    <p th:text="${messageErreur}"></p>
				</div>
				
				<div th:if="${message}" class="alert alert-success p-2" role="alert">
    <!-- Afficher le message de succès -->
    <p th:text="${message}"></p>
</div>
				
                <div class="row border border-secondary m-3 p-2 ">
                  <form action="#" th:action="@{/addPersonne}" th:object="${PersonneModel}" method="post">
    <div class="row">
        <div class="col-6">
            <p class="text-danger" th:if="${#fields.hasErrors('nom')}" th:errors="*{nom}"></p>
            <label for="nom">Nom :</label><br>
            <input type="text" id="nom" th:field="*{nom}"><br><br>

            <input type="hidden" id="id" th:field="*{id}" />
            <input type="hidden" id="typePerson" th:field="*{typePerson}" />

            <p class="text-danger" th:if="${#fields.hasErrors('prenom')}" th:errors="*{prenom}"></p>
            <label for="prenom">Prénom :</label><br>
            <input type="text" id="prenom" th:field="*{prenom}"><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('sexe')}" th:errors="*{sexe}"></p>
            <label>Sexe :</label><br>
            <input class="form-check-input" type="radio" th:field="*{sexe}" id="homme" value="homme"/>
            <label class="form-check-label" for="homme">Homme</label>
            <input class="form-check-input" type="radio" th:field="*{sexe}" id="femme" value="femme"/>
            <label class="form-check-label" for="femme">Femme</label><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('PPR')}" th:errors="*{PPR}"></p>
            <label for="PPR">PPR :</label><br>
            <input type="text" id="PPR" th:field="*{PPR}"><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('CIN')}" th:errors="*{CIN}"></p>
            <label for="CIN">CIN :</label><br>
            <input type="text" id="CIN" th:field="*{CIN}"><br><br>

            <label for="date_naissance">Date de naissance :</label><br>
            <input type="date" id="date_naissance" th:field="*{dateNaissance}"><br><br>

            <label for="lieu_naissance">Lieu de naissance :</label><br>
            <input type="text" id="lieu_naissance" th:field="*{lieuNaissance}"><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('situationAdmin')}" th:errors="*{situationAdmin}"></p>
            <label for="situation_admin">Situation administrative :</label><br>
            <input type="text" id="situation_admin" th:field="*{situationAdmin}"><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('ancAdministratif')}" th:errors="*{ancAdministratif}"></p>
            <label for="anc_administratif">Ancienneté dans l'administration :</label><br>
            <input type="text" id="anc_administratif" th:field="*{ancAdministratif}"><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('specialite')}" th:errors="*{specialite}"></p>
            <label for="specialite">Spécialité :</label><br>
            <select id="specialite" th:field="*{specialite}" required>
                <option value="Informatique">Informatique</option>
                <option value="Mathématéque">Mathématéque</option>
                <option value="Physique">Physique</option>
                <option value="Chimie">Chimie</option>
            </select><br><br>
        </div>

        <div class="col-6">
            <p class="text-danger" th:if="${#fields.hasErrors('dateRecrutement')}" th:errors="*{dateRecrutement}"></p>
            <label for="date_recrutement">Date de recrutement :</label><br>
            <input type="date" id="date_recrutement" th:field="*{dateRecrutement}"><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('dateAffectation')}" th:errors="*{dateAffectation}"></p>
            <label for="date_affectation">Date d'affectation à l'ENSAH :</label><br>
            <input type="date" id="date_affectation" th:field="*{dateAffectation}"><br><br>

            <label for="departement">Département :</label><br>
            <select id="departement" th:field="*{departement}" required>
                <option value="">Sélectionnez un département</option>
                <option th:each="departement : ${listeDepartemet}" th:value="${departement.id}" th:text="${departement.name}"></option>
            </select><br><br>
            <p class="text-danger" th:if="${#fields.hasErrors('departement')}" th:errors="*{departement}"></p>

            <label for="filiere">Filière :</label><br>
            <select id="filiere" th:field="*{filiere}" required>
                <option value="">Sélectionnez une filière</option>
                <option th:each="filiere : ${listeFiliere}" th:value="${filiere.id_Filiere}" th:text="${filiere.name}"></option>
            </select><br><br>
            <p class="text-danger" th:if="${#fields.hasErrors('filiere')}" th:errors="*{filiere}"></p>

            <p class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></p>
            <label for="email">Email :</label><br>
            <input type="email" id="email" th:field="*{email}"><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('telephone')}" th:errors="*{telephone}"></p>
            <label for="telephone">Téléphone :</label><br>
            <input type="tel" id="telephone" th:field="*{telephone}"><br><br>

              <p class="text-danger" th:if="${#fields.hasErrors('grade')}" th:errors="*{grade}"></p>
            <label for="grade">Grade :</label><br>
            <input type="text" id="grade" th:field="*{grade}"><br><br>

            <p class="text-danger" th:if="${#fields.hasErrors('adresse')}" th:errors="*{adresse}"></p>
            <label for="adresse">Adresse :</label><br>
            <textarea id="adresse" th:field="*{adresse}" rows="4" cols="30"></textarea><br><br>
        </div>
    </div>
    <div class="row p-2">
             <div class="col-md-3">
                <button type="submit"  onclick="annuler()" class="btn btn-secondary">Annuler</button>
            </div>
            <div class="col-md-3"></div> <!-- Colonne vide pour l'espacement -->
                        <div class="col-md-3"></div> <!-- Colonne vide pour l'espacement -->
            
            <div class="col-md-3">
                <button type="submit" class="btn btn-primary">Enregistrer</button>
                 </div> </div>
</form>

                </div>
            </div>
        </main>
    </div>
    <div th:replace="./footer.html"></div>
    <script>
        // Sélectionnez l'élément avec l'ID "ajo"
        var ele = document.getElementById("ajo");

        // Modifiez le style de fond en utilisant la propriété "style" et "backgroundColor"
        ele.style.backgroundColor = "#50FF63";
      
        function annuler() {
            // Sélectionnez tous les champs du formulaire
            var champsFormulaire = document.querySelectorAll('input[type=text], input[type=radio], input[type=date], input[type=email], input[type=tel], textarea, select');

            // Parcourez tous les champs et réinitialisez leur valeur à vide
            champsFormulaire.forEach(function(champ) {
                champ.value = '';
            });

            // Sélectionnez tous les éléments <p> dans le formulaire
            var paragraphes = document.getElementsByTagName("p");
            
            // Parcourez tous les paragraphes et réinitialisez leur contenu à vide
            for (var i = 0; i < paragraphes.length; i++) {
                paragraphes[i].textContent = '';
            }
        }
        function confirmDeletion(event, personId) {
            event.preventDefault();
            if (confirm("Êtes-vous sûr de vouloir supprimer cette personne ?")) {
                document.getElementById("deleteForm-" + personId).submit();
            }
        }
    </script>
</body>
</html>
